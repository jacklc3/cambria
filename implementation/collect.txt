with handler {
    return x -> return (x, ""),
    print(s; k) -> do x <- k () in
        do r1 <- fst x in
        do r2 <- snd x in
        do r3 <- join s in
        do r4 <- r3 r3 in
        return (r1, r4)
} handle (
    do x <- #print("A"; y.return y) in
    do y <- #print("B"; y.return y) in
    #print("C"; y.return y))
